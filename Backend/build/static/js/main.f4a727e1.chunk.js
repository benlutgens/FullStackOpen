(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(14),a=n.n(r),u=n(3),o=n(0),i=function(e){var t=e.search,n=e.handleSearch;return Object(o.jsxs)("div",{children:["filter shown with",Object(o.jsx)("input",{value:t,onChange:n})]})},s=function(e){var t=e.newName,n=e.handleNameChange,c=e.addNewItem,r=e.newNum,a=e.handleNumChange;return Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:t,onChange:n})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:a})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},d=function(e){var t=e.filterList,n=e.handleDelete;return Object(o.jsx)("div",{children:t.map((function(e){return Object(o.jsxs)("p",{children:[e.name," ",e.number,Object(o.jsx)("button",{id:e.id,onClick:n,children:"Delete"})]},e.id)}))})},l=function(e){var t=e.message,n=e.type,c={error:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},success:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}};if(null===t)return null;var r="error"===n?c.error:c.success;return Object(o.jsx)("div",{style:r,children:t})},f=n(4),j=n.n(f),h="/api/persons",b=function(){return j.a.get(h).then((function(e){return e.data}))},m=function(e){return j.a.post(h,e).then((function(e){return e.data}))},O=function(e,t){return j.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.status}))},v=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),f=Object(u.a)(a,2),j=f[0],h=f[1],v=Object(c.useState)(""),x=Object(u.a)(v,2),g=x[0],w=x[1],S=Object(c.useState)(n),y=Object(u.a)(S,2),C=y[0],N=y[1],k=Object(c.useState)(""),D=Object(u.a)(k,2),I=D[0],L=D[1],B=Object(c.useState)(null),z=Object(u.a)(B,2),E=z[0],J=z[1],R=Object(c.useState)("error"),P=Object(u.a)(R,2),T=P[0],U=P[1];Object(c.useEffect)((function(){b().then((function(e){r(e),N(e)}))}),[]);var q=function(e,t){J(t),U(e),setTimeout((function(){J(null),U(null)}),5e3)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(l,{message:E,type:T}),Object(o.jsx)(i,{search:I,handleSearch:function(e){var t=e.target.value;if(0===t.length)N(n);else{var c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));N(c)}L(t)}}),Object(o.jsx)(s,{newName:j,handleNameChange:function(e){h(e.target.value)},newNum:g,handleNumChange:function(e){w(e.target.value)},addNewItem:function(e){e.preventDefault();var t=!1,c={name:j,number:g};(function(){var e=n.find((function(e){return e.name===j}));return console.log(e),void 0!==e})()&&(t=window.confirm("".concat(j," already exists, replace the old number with a new one?"))),t?((c=n.find((function(e){return e.name===j}))).number=g,O(c.id,c).then((function(e){var t=n.map((function(t){return t.id!==e.id?t:e}));r(t),N(t),h(""),w(""),L(""),q("success","Updated ".concat(e.name," successfully"))})).catch((function(e){q("error","Could not update ".concat(c.name))}))):m(c).then((function(e){var t=n.concat(e);r(t),N(t),h(""),w(""),L(""),q("success","successfully added ".concat(e.name))})).catch((function(e){q("error","could not add ".concat(c.name," to database"))}))}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(d,{filterList:C,handleDelete:function(e){var t=parseInt(e.target.id);window.confirm("Delete ".concat(n.find((function(e){return e.id===t})).name,"?"))&&p(t).then((function(e){var c=n.filter((function(e){return e.id!==t}));N(c),r(c),h(""),w(""),L(""),q("success","Successfully deleted")})).catch((function(e){q("error","Could not delete")}))}})]})};a.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f4a727e1.chunk.js.map